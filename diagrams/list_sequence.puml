@startuml
actor Client
entity Server
Database "Session Store"
Database "File Store"

Client -> Server: **LIST** Request
Client -> Server: Session Key
Server -> "Session Store": Check if Session Key is Valid
"Session Store" --> Server: Session Key check result

group Has valid Session Key Success
    Server -> "File Store": Get list of Files in User Directory
    "File Store" --> Server: File Listing result

    group File Listing Retrieved Successfully
        Server --> Client: **SUCCESS** Response
        Server --> Client: SUCCESS Header Message
        Server --> Client: File Listing
    end

    group Failed to retrieve File Listing
        Server --> Client: **ERROR** Response
        Server --> Client: ERROR Reason Header Message
    end
end

group Invalid Session Key
    Server --> Client: **Denied** Response
    Server --> Client: DENIED Reason Header Message
end

group Session Key not provided with Request
    Server --> Client: **Error** Response
    Server --> Client: DENIED Reason Header Message
end
@enduml